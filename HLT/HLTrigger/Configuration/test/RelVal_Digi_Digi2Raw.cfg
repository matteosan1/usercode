process Raw = {

  untracked PSet maxEvents = {untracked int32 input = 100}

  untracked PSet configurationMetadata = {
    untracked string version = "$Revision: 1.24 $"
    untracked string name = "$Source: /cvs_server/repositories/CMSSW/CMSSW/HLTrigger/Configuration/test/RelVal_Digi_Digi2Raw.cfg,v $"
    untracked string annotation = "Standard CFG to digitize and run digi2raw (also L1)"
  }

  source = PoolSource {
    untracked vstring fileNames = {
      // 1_4_X CSA07 GEN-SIM input:
      //'/store/mc/2007/6/23/CSA07-QCD_Pt_80_120-1963/0001/10B30AF7-3C25-DC11-88A1-00304875AAD5.root'
      //"/store/RelVal/2007/7/10/RelVal-RelVal152TTbar-1184059625/0000/08BD2009-042F-DC11-A1CE-001617C3B6F0.root"
      "file:/scratch/cms/TTbarGenSim180pre3a.root"
    }
  }

  # need the Random Generator service for digitizaion
  include "Configuration/ReleaseValidation/data/Services.cff"

  include "Configuration/StandardSequences/data/Reconstruction.cff"
  include "Configuration/StandardSequences/data/Simulation.cff"
  include "Configuration/StandardSequences/data/MixingNoPileUp.cff" 
  # add vertex smearing which is NOT needed - but creates problems with python
  include "Configuration/StandardSequences/data/VtxSmearedGauss.cff"

  // Conditions data
  // Digi to raw: Conditions should be included through StandardSequences
  // include "Configuration/StandardSequences/data/FakeConditions.cff"
  include "Configuration/StandardSequences/data/FrontierConditions.cff"

  // Packing digi to raw
  include "Configuration/StandardSequences/data/DigiToRaw.cff"
  
  // Emulator configuration
  include "Configuration/StandardSequences/data/L1Emulator.cff"
  // Unprescale menu - change prescale factors to 1 (except MinBias and ZeroBias)
  include "L1TriggerConfig/L1GtConfigProducers/data/L1GtFactorsUnprescale.cff"


  path doDigiL1Raw = { pdigi & L1Emulator & DigiToRaw }

  untracked PSet options = { untracked bool wantSummary = true }

  include "Configuration/EventContent/data/EventContent.cff"
  module FEVT = PoolOutputModule {
    using FEVTSIMEventContent	
    untracked string fileName='file:RelVal_Digi_Raw.root'
    untracked int32 basketSize = 4096
      untracked PSet dataset ={      
        untracked string dataTier = "RAW"
      }
  }
  //Keep only GEN, SIM, new DIGI, L1, RAW 
  replace FEVT.outputCommands += "drop *_*Digis_*_Sim" // to drop old digis

  module REVT = PoolOutputModule {
    untracked vstring outputCommands = {
      "drop *" ,
      "keep FEDRawDataCollection_rawDataCollector_*_Raw"
    }
    untracked string fileName='file:RelVal_Pure_Raw.root'
    untracked int32 basketSize = 4096
      untracked PSet dataset ={      
        untracked string dataTier = "RAW"
      }
  }

  endpath e1 = { FEVT } 
  endpath e2 = { REVT } 

}
