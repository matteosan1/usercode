//
// When starting from digis, there are of course no "regional digis" and no "regional rechits".
// In order not to duplicate too much the modules in the Egamma paths, we define
// here the modules "ecalRegionalEgammaWeightUncalibRecHit", "ecalRegionalEgammaRecHit" etc..
// and the sequences ecalRegionalEgammaRecoSequence etc..
// This way, the subsequent clustering modules always start from the RecHits created
// by "ecalRegionalEgammaRecHit", both in the "FromDigis" and the "FromRaw" cases.
//


//
// From here on simply cloning ecalLocalRecoSequence.cff
//   with updated InputTags
//
# Calo geometry service model
include "Geometry/CaloEventSetup/data/CaloGeometry.cfi"

module  ecalRegionalEgammaWeightUncalibRecHit = ecalWeightUncalibRecHit from "RecoLocalCalo/EcalRecProducers/data/ecalWeightUncalibRecHit.cfi"
# replace ecalRegionalEgammaWeightUncalibRecHit.EBdigiCollection = ecalDigis
# replace ecalRegionalEgammaWeightUncalibRecHit.EEdigiCollection = ecalDigis
module  ecalRegionalEgammaRecHit = ecalRecHit from "RecoLocalCalo/EcalRecProducers/data/ecalRecHit.cfi"
replace ecalRegionalEgammaRecHit.EBuncalibRecHitCollection = ecalRegionalEgammaWeightUncalibRecHit:EcalUncalibRecHitsEB
replace ecalRegionalEgammaRecHit.EEuncalibRecHitCollection = ecalRegionalEgammaWeightUncalibRecHit:EcalUncalibRecHitsEE

module  ecalRegionalMuonsWeightUncalibRecHit = ecalWeightUncalibRecHit from "RecoLocalCalo/EcalRecProducers/data/ecalWeightUncalibRecHit.cfi"
# replace ecalRegionalMuonsWeightUncalibRecHit.EBdigiCollection = ecalDigis
# replace ecalRegionalMuonsWeightUncalibRecHit.EEdigiCollection = ecalDigis
module  ecalRegionalMuonsRecHit = ecalRecHit from "RecoLocalCalo/EcalRecProducers/data/ecalRecHit.cfi"
replace ecalRegionalMuonsRecHit.EBuncalibRecHitCollection = ecalRegionalMuonsWeightUncalibRecHit:EcalUncalibRecHitsEB
replace ecalRegionalMuonsRecHit.EEuncalibRecHitCollection = ecalRegionalMuonsWeightUncalibRecHit:EcalUncalibRecHitsEE

module  ecalRegionalTausWeightUncalibRecHit = ecalWeightUncalibRecHit from "RecoLocalCalo/EcalRecProducers/data/ecalWeightUncalibRecHit.cfi"
# replace ecalRegionalTausWeightUncalibRecHit.EBdigiCollection = ecalDigis
# replace ecalRegionalTausWeightUncalibRecHit.EEdigiCollection = ecalDigis
module  ecalRegionalTausRecHit = ecalRecHit from "RecoLocalCalo/EcalRecProducers/data/ecalRecHit.cfi"
replace ecalRegionalTausRecHit.EBuncalibRecHitCollection = ecalRegionalTausWeightUncalibRecHit:EcalUncalibRecHitsEB
replace ecalRegionalTausRecHit.EEuncalibRecHitCollection = ecalRegionalTausWeightUncalibRecHit:EcalUncalibRecHitsEE

module  ecalRegionalJetsWeightUncalibRecHit = ecalWeightUncalibRecHit from "RecoLocalCalo/EcalRecProducers/data/ecalWeightUncalibRecHit.cfi"
module ecalRegionalJetsRecHit = ecalRecHit from "RecoLocalCalo/EcalRecProducers/data/ecalRecHit.cfi"
replace ecalRegionalJetsRecHit.EBuncalibRecHitCollection = ecalRegionalJetsWeightUncalibRecHit:EcalUncalibRecHitsEB
replace ecalRegionalJetsRecHit.EEuncalibRecHitCollection = ecalRegionalJetsWeightUncalibRecHit:EcalUncalibRecHitsEE

module  ecalRegionalRestWeightUncalibRecHit = ecalWeightUncalibRecHit from "RecoLocalCalo/EcalRecProducers/data/ecalWeightUncalibRecHit.cfi"
module ecalRecHitAll = ecalRecHit from "RecoLocalCalo/EcalRecProducers/data/ecalRecHit.cfi"
module ecalRecHitAll.EBuncalibRecHitCollection = ecalRegionalRestWeightUncalibRecHit:EcalUncalibRecHitsEB
module ecalRecHitAll.EEuncalibRecHitCollection = ecalRegionalRestWeightUncalibRecHit:EcalUncalibRecHitsEE


//
// Preshower is unchanged!
//
include "RecoLocalCalo/EcalRecProducers/data/ecalPreshowerRecHit.cfi"


//
// sequence definition
//
sequence ecalRegionalEgammaRecoSequence = { 
  ecalRegionalEgammaWeightUncalibRecHit , ecalRegionalEgammaRecHit &
  ecalPreshowerRecHit }

sequence ecalRegionalMuonsRecoSequence = { 
  ecalRegionalMuonsWeightUncalibRecHit , ecalRegionalMuonsRecHit &
  ecalPreshowerRecHit }

sequence ecalRegionalTausRecoSequence = {
  ecalRegionalTausWeightUncalibRecHit , ecalRegionalTausRecHit &
  ecalPreshowerRecHit }

sequence ecalRegionalJetsRecoSequence = {
  ecalRegionalJetsWeightUncalibRecHit , ecalRegionalJetsRecHit &
  ecalPreshowerRecHit }
                                                                                                                                      
sequence ecalAllRecoSequence = {
  ecalRegionalRestWeightUncalibRecHit , ecalRecHitAll &
  ecalPreshowerRecHit }

