#--------------------------------------------------------------------#
# L1 MATCH
#--------------------------------------------------------------------#
module hltL1IsoDoublePhotonL1MatchFilterRegional = hltEgammaL1MatchFilterRegional from "HLTrigger/Egamma/data/hltEgammaL1MatchFilterRegional.cfi" 

      replace hltL1IsoDoublePhotonL1MatchFilterRegional.candIsolatedTag = l1IsoRecoEcalCandidate
 replace  hltL1IsoDoublePhotonL1MatchFilterRegional.L1SeedFilterTag = l1seedDouble
      replace  hltL1IsoDoublePhotonL1MatchFilterRegional.ncandcut = 2
      replace  hltL1IsoDoublePhotonL1MatchFilterRegional.doIsolated = true
#
#--------------------------------------------------------------------#
# ET CUT
#--------------------------------------------------------------------#
module hltL1IsoDoublePhotonEtFilter = hltEgammaEtFilter from "HLTrigger/Egamma/data/hltEgammaEtFilter.cfi"

replace hltL1IsoDoublePhotonEtFilter.inputTag = hltL1IsoDoublePhotonL1MatchFilterRegional
replace hltL1IsoDoublePhotonEtFilter.etcut = 20.0
replace hltL1IsoDoublePhotonEtFilter.ncandcut = 2


#--------------------------------------------------------------------#
# ECAL ISOL
#--------------------------------------------------------------------#
module hltL1IsoDoublePhotonEcalIsolFilter = hltPhotonEcalIsolFilter from "HLTrigger/Egamma/data/hltPhotonEcalIsolFilter.cfi" 

replace hltL1IsoDoublePhotonEcalIsolFilter.candTag = hltL1IsoDoublePhotonEtFilter
replace hltL1IsoDoublePhotonEcalIsolFilter.isoTag  = l1IsolatedPhotonEcalIsol
replace hltL1IsoDoublePhotonEcalIsolFilter.ecalisolcut = 2.5
replace hltL1IsoDoublePhotonEcalIsolFilter.ncandcut = 2

#--------------------------------------------------------------------#
# HCAL ISOL
#--------------------------------------------------------------------#
module hltL1IsoDoublePhotonHcalIsolFilter = hltEgammaHcalIsolFilter from "HLTrigger/Egamma/data/hltEgammaHcalIsolFilter.cfi"

 replace hltL1IsoDoublePhotonHcalIsolFilter.candTag = hltL1IsoDoublePhotonEcalIsolFilter
 replace hltL1IsoDoublePhotonHcalIsolFilter.isoTag = l1IsolatedPhotonHcalIsol
 replace hltL1IsoDoublePhotonHcalIsolFilter.hcalisolbarrelcut = 8.
 replace hltL1IsoDoublePhotonHcalIsolFilter.hcalisolendcapcut = 6.
 replace hltL1IsoDoublePhotonHcalIsolFilter.ncandcut = 2


#--------------------------------------------------------------------#
# TRACK ISOL
#--------------------------------------------------------------------#
 module hltL1IsoDoublePhotonTrackIsolFilter = hltPhotonTrackIsolFilter from "HLTrigger/Egamma/data/hltPhotonTrackIsolFilter.cfi"

replace  hltL1IsoDoublePhotonTrackIsolFilter.candTag  = hltL1IsoDoublePhotonHcalIsolFilter
replace  hltL1IsoDoublePhotonTrackIsolFilter.isoTag   = l1IsoPhotonTrackIsol
replace  hltL1IsoDoublePhotonTrackIsolFilter.numtrackisolcut = 3
replace  hltL1IsoDoublePhotonTrackIsolFilter.ncandcut = 2

#--------------------------------------------------------------------#
# DOUBLE ET CUT
#--------------------------------------------------------------------#
module hltL1IsoDoublePhotonDoubleEtFilter = hltEgammaDoubleEtFilter from "HLTrigger/Egamma/data/hltEgammaDoubleEtFilter.cfi"

replace hltL1IsoDoublePhotonDoubleEtFilter.candTag =  hltL1IsoDoublePhotonTrackIsolFilter
replace hltL1IsoDoublePhotonDoubleEtFilter.etcut1 = 20.0 

#      double etcut1 = 30.0
#      double etcut2 = 20.0
#      int32  npaircut = 1

#--------------------------------------------------------------------#
#--------------------------------------------------------------------#

  module doublePhotonL1IsoPresc = HLTPrescaler {
         bool   makeFilterObject = true
         uint32 prescaleFactor = 1
         uint32 eventOffset    = 0
  }



  sequence doublePhotonL1Isolated = {
			  hltBegin&
	                   #doL1T &
                           l1seedDouble &
		           doRegionalEgammaEcal &
#                           doLocalEcal &
                           l1IsolatedEcalClusters  &
                           l1IsoRecoEcalCandidate &
                           #hltL1IsoDoublePhotonL1MatchFilter &
                           hltL1IsoDoublePhotonL1MatchFilterRegional &
                           hltL1IsoDoublePhotonEtFilter & 
	                   l1IsolatedPhotonEcalIsol & hltL1IsoDoublePhotonEcalIsolFilter &
                           doLocalHcalWithoutHO &
                           l1IsolatedPhotonHcalIsol & hltL1IsoDoublePhotonHcalIsolFilter &
                           doLocalTracker &
                           l1IsoEgammaRegionalRecoTracker &
                           l1IsoPhotonTrackIsol & hltL1IsoDoublePhotonTrackIsolFilter &
	                   hltL1IsoDoublePhotonDoubleEtFilter &
                           doublePhotonL1IsoPresc
	                  }
