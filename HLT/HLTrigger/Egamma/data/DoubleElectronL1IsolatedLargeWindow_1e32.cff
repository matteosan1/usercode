#--------------------------------------------------------------------#
# L1 MATCH
#--------------------------------------------------------------------#
module hltL1IsoLargeWindowDoubleElectronL1MatchFilterRegional = hltEgammaL1MatchFilterRegional from "HLTrigger/Egamma/data/hltEgammaL1MatchFilterRegional.cfi" 

     replace hltL1IsoLargeWindowDoubleElectronL1MatchFilterRegional.candIsolatedTag = l1IsoRecoEcalCandidate
     replace hltL1IsoLargeWindowDoubleElectronL1MatchFilterRegional.L1SeedFilterTag = l1seedDouble

#     InputTag l1Tag = l1extraParticles:Isolated
     replace  hltL1IsoLargeWindowDoubleElectronL1MatchFilterRegional.ncandcut = 2
     replace  hltL1IsoLargeWindowDoubleElectronL1MatchFilterRegional.doIsolated = true
#
#      double region_eta_size      = 0.522
#      double region_eta_size_ecap = 0.87
#      double region_phi_size      = 1.044
#      double barrel_end           = 1.4791
#      double endcap_end           = 2.5

#--------------------------------------------------------------------#
# ET CUT
#--------------------------------------------------------------------#
module hltL1IsoLargeWindowDoubleElectronEtFilter = hltEgammaEtFilter from "HLTrigger/Egamma/data/hltEgammaEtFilter.cfi"

 #replace hltL1IsoLargeWindowDoubleElectronEtFilter.inputTag = hltL1IsoLargeWindowDoubleElectronL1MatchFilter
 replace hltL1IsoLargeWindowDoubleElectronEtFilter.inputTag = hltL1IsoLargeWindowDoubleElectronL1MatchFilterRegional

 replace hltL1IsoLargeWindowDoubleElectronEtFilter.etcut = 10.0
 replace hltL1IsoLargeWindowDoubleElectronEtFilter.ncandcut = 2


#--------------------------------------------------------------------#
# HCAL ISOL
#--------------------------------------------------------------------#
module hltL1IsoLargeWindowDoubleElectronHcalIsolFilter = hltEgammaHcalIsolFilter from "HLTrigger/Egamma/data/hltEgammaHcalIsolFilter.cfi"

 replace hltL1IsoLargeWindowDoubleElectronHcalIsolFilter.candTag = hltL1IsoLargeWindowDoubleElectronEtFilter
 replace hltL1IsoLargeWindowDoubleElectronHcalIsolFilter.isoTag = l1IsolatedElectronHcalIsol
 replace hltL1IsoLargeWindowDoubleElectronHcalIsolFilter.hcalisolbarrelcut = 9.
 replace hltL1IsoLargeWindowDoubleElectronHcalIsolFilter.hcalisolendcapcut = 9.
 replace hltL1IsoLargeWindowDoubleElectronHcalIsolFilter.ncandcut = 2

#--------------------------------------------------------------------#
# PIXEL MATCH
#--------------------------------------------------------------------#
module hltL1IsoLargeWindowDoubleElectronPixelMatchFilter = hltElectronPixelMatchFilter from "HLTrigger/Egamma/data/hltElectronPixelMatchFilter.cfi"

  replace hltL1IsoLargeWindowDoubleElectronPixelMatchFilter.candTag = hltL1IsoLargeWindowDoubleElectronHcalIsolFilter
  replace hltL1IsoLargeWindowDoubleElectronPixelMatchFilter.L1IsoPixelSeedsTag = l1IsoLargeWindowElectronPixelSeeds
#      double   npixelmatchcut         = 1
  replace hltL1IsoLargeWindowDoubleElectronPixelMatchFilter.ncandcut = 2

#--------------------------------------------------------------------#
# E OVER P !! HERE is not applyed and it is used to change 
#       the HLTFilterObjectWithRefs from RecoEcalCandidates to Electron
#--------------------------------------------------------------------#
 module hltL1IsoLargeWindowDoubleElectronEoverpFilter = hltElectronEoverpFilter from "HLTrigger/Egamma/data/hltElectronEoverpFilter.cfi"

 replace hltL1IsoLargeWindowDoubleElectronEoverpFilter.candTag = hltL1IsoLargeWindowDoubleElectronPixelMatchFilter
 replace hltL1IsoLargeWindowDoubleElectronEoverpFilter.electronIsolatedProducer = pixelMatchElectronsL1IsoLargeWindowForHLT 
  replace hltL1IsoLargeWindowDoubleElectronEoverpFilter.eoverpbarrelcut = 15000
  replace hltL1IsoLargeWindowDoubleElectronEoverpFilter.eoverpendcapcut = 24500
  replace hltL1IsoLargeWindowDoubleElectronEoverpFilter.ncandcut = 2

#--------------------------------------------------------------------#
# TRACK ISOL
#--------------------------------------------------------------------#
 module hltL1IsoLargeWindowDoubleElectronTrackIsolFilter = hltElectronTrackIsolFilter from "HLTrigger/Egamma/data/hltElectronTrackIsolFilter.cfi"

replace  hltL1IsoLargeWindowDoubleElectronTrackIsolFilter.candTag  = hltL1IsoLargeWindowDoubleElectronEoverpFilter
replace  hltL1IsoLargeWindowDoubleElectronTrackIsolFilter.isoTag   = l1IsoLargeWindowElectronTrackIsol
replace  hltL1IsoLargeWindowDoubleElectronTrackIsolFilter.pttrackisolcut = 0.4
replace  hltL1IsoLargeWindowDoubleElectronTrackIsolFilter.ncandcut         = 2

#--------------------------------------------------------------------#
#--------------------------------------------------------------------#

  module doubleElectronL1IsoLargeWindowPresc = HLTPrescaler {
         bool   makeFilterObject = true
         uint32 prescaleFactor = 1
         uint32 eventOffset    = 0
  }



  sequence doubleElectronL1IsolatedLargeWindow = { 
	                               hltBegin&
                        ##              doL1T &
                                        l1seedDouble &
		           doRegionalEgammaEcal &
#                             doLocalEcal & 
	                     l1IsolatedEcalClusters &
                             l1IsoRecoEcalCandidate &
                             hltL1IsoLargeWindowDoubleElectronL1MatchFilterRegional &
                             hltL1IsoLargeWindowDoubleElectronEtFilter &
                             doLocalHcalWithoutHO &
                             l1IsolatedElectronHcalIsol & hltL1IsoLargeWindowDoubleElectronHcalIsolFilter &
                             ##### trackerlocalreco &              
  			     doLocalPixel &
	                     pixelMatchElectronL1IsoLargeWindowSequenceForHLT & 
                             hltL1IsoLargeWindowDoubleElectronPixelMatchFilter &
                             doLocalStrip  & 
                             pixelMatchElectronL1IsoLargeWindowTrackingSequenceForHLT &
                             hltL1IsoLargeWindowDoubleElectronEoverpFilter &	
                             //ckftracks & 
                             l1IsoLargeWindowElectronsRegionalRecoTracker & //// here the regional is obtained by
                                                           /// EgammaHLTRegionalPixelSeedGeneratorProducer
                             l1IsoLargeWindowElectronTrackIsol & hltL1IsoLargeWindowDoubleElectronTrackIsolFilter &
                                                      
                             doubleElectronL1IsoLargeWindowPresc
                            }






