#--------------------------------------------------------------------#
# L1 MATCH
#--------------------------------------------------------------------#
module hltL1NonIsoSingleEMHighEtL1MatchFilterRegional = hltEgammaL1MatchFilterRegional from "HLTrigger/Egamma/data/hltEgammaL1MatchFilterRegional.cfi" 

     replace hltL1NonIsoSingleEMHighEtL1MatchFilterRegional.candIsolatedTag = l1IsoRecoEcalCandidate
     replace hltL1NonIsoSingleEMHighEtL1MatchFilterRegional.candNonIsolatedTag = l1NonIsoRecoEcalCandidate
     replace  hltL1NonIsoSingleEMHighEtL1MatchFilterRegional.L1SeedFilterTag = l1seedRelaxedSingle
     replace  hltL1NonIsoSingleEMHighEtL1MatchFilterRegional.ncandcut = 1
     replace  hltL1NonIsoSingleEMHighEtL1MatchFilterRegional.doIsolated = false

#--------------------------------------------------------------------#
# ET CUT
#--------------------------------------------------------------------#
module hltL1NonIsoSinglePhotonEMHighEtEtFilter = hltEgammaEtFilter from "HLTrigger/Egamma/data/hltEgammaEtFilter.cfi"

replace hltL1NonIsoSinglePhotonEMHighEtEtFilter.inputTag = hltL1NonIsoSingleEMHighEtL1MatchFilterRegional
replace hltL1NonIsoSinglePhotonEMHighEtEtFilter.etcut = 80.0
replace hltL1NonIsoSinglePhotonEMHighEtEtFilter.ncandcut = 1

#--------------------------------------------------------------------#
# ECAL ISOL
#--------------------------------------------------------------------#
module hltL1NonIsoSingleEMHighEtEcalIsolFilter = hltPhotonEcalIsolFilter from "HLTrigger/Egamma/data/hltPhotonEcalIsolFilter.cfi" 

replace hltL1NonIsoSingleEMHighEtEcalIsolFilter.candTag = hltL1NonIsoSinglePhotonEMHighEtEtFilter
replace hltL1NonIsoSingleEMHighEtEcalIsolFilter.isoTag  = l1IsolatedPhotonEcalIsol
replace hltL1NonIsoSingleEMHighEtEcalIsolFilter.nonIsoTag  = l1NonIsolatedPhotonEcalIsol
replace hltL1NonIsoSingleEMHighEtEcalIsolFilter.ecalisolcut = 5.
replace hltL1NonIsoSingleEMHighEtEcalIsolFilter.ncandcut = 1
replace hltL1NonIsoSingleEMHighEtEcalIsolFilter.doIsolated = false

#--------------------------------------------------------------------#
# H/E
#--------------------------------------------------------------------#
module hltL1NonIsoSingleEMHighEtHOEFilter = hltSinlgeEMHOEFilter from "HLTrigger/Egamma/data/hltSingleEMHOEFilter.cfi"

replace hltL1NonIsoSingleEMHighEtHOEFilter.candTag =  hltL1NonIsoSingleEMHighEtEcalIsolFilter
#      InputTag isoTag  = l1IsolatedElectronHcalIsol
#      InputTag nonIsoTag  = l1NonIsolatedElectronHcalIsol
#      double hcalisolbarrelcut = 0.05
#      double hcalisolendcapcut = 0.05
#      int32 ncandcut = 1
#      bool doIsolated = false


#--------------------------------------------------------------------#
# HCAL DOUBLE CONE
#--------------------------------------------------------------------#
module hltL1NonIsoSingleEMHighEtHcalDBCFilter = hltSingleEMHcalDoubleConeFilter from "HLTrigger/Egamma/data/hltSingleEMHcalDoubleConeFilter.cfi"

 #     InputTag candTag = hltL1NonIsoSingleEMHighEtHOEFilter
 #     InputTag isoTag  = hltHcalDoubleCone
 #     InputTag nonIsoTag  = l1NonIsoEMHcalDoubleCone
 #     double hcalisolbarrelcut = 8.
 #     double hcalisolendcapcut = 8.
 #     int32 ncandcut = 1
 #     bool doIsolated = false

#--------------------------------------------------------------------#
# TRACK ISOL
#--------------------------------------------------------------------#
 module hltL1NonIsoSingleEMHighEtTrackIsolFilter = hltPhotonTrackIsolFilter from "HLTrigger/Egamma/data/hltPhotonTrackIsolFilter.cfi"

replace  hltL1NonIsoSingleEMHighEtTrackIsolFilter.candTag  = hltL1NonIsoSingleEMHighEtHcalDBCFilter
replace  hltL1NonIsoSingleEMHighEtTrackIsolFilter.isoTag   = l1IsoPhotonTrackIsol
replace  hltL1NonIsoSingleEMHighEtTrackIsolFilter.nonIsoTag  = l1NonIsoPhotonTrackIsol
replace  hltL1NonIsoSingleEMHighEtTrackIsolFilter.numtrackisolcut = 4
replace  hltL1NonIsoSingleEMHighEtTrackIsolFilter.ncandcut = 1
replace  hltL1NonIsoSingleEMHighEtTrackIsolFilter.doIsolated = false

#--------------------------------------------------------------------#
# Prescaler
#--------------------------------------------------------------------#
  module singleEMVHighEtL1NonIsoPresc = HLTPrescaler {
         bool   makeFilterObject = true
         uint32 prescaleFactor = 1
         uint32 eventOffset    = 0
  }

sequence singleEMHighEtL1NonIsolated = { hltBegin
					& l1seedRelaxedSingle
                         & doRegionalEgammaEcal
#					& doLocalEcal
  					& l1IsolatedEcalClusters
                                	& l1NonIsolatedEcalClusters
                                	& l1IsoRecoEcalCandidate
                                	& l1NonIsoRecoEcalCandidate
					& hltL1NonIsoSingleEMHighEtL1MatchFilterRegional
					& hltL1NonIsoSinglePhotonEMHighEtEtFilter
					& l1IsolatedPhotonEcalIsol
					& l1NonIsolatedPhotonEcalIsol
					& hltL1NonIsoSingleEMHighEtEcalIsolFilter

					& doLocalHcalWithoutHO
					& l1NonIsolatedElectronHcalIsol
					& l1IsolatedElectronHcalIsol
					& hltL1NonIsoSingleEMHighEtHOEFilter
					& hltHcalDoubleCone
					& l1NonIsoEMHcalDoubleCone
					& hltL1NonIsoSingleEMHighEtHcalDBCFilter

					& doLocalTracker
					& l1IsoEgammaRegionalRecoTracker
					& l1NonIsoEgammaRegionalRecoTracker   
					& l1IsoPhotonTrackIsol
					& l1NonIsoPhotonTrackIsol
					& hltL1NonIsoSingleEMHighEtTrackIsolFilter
					& singleEMVHighEtL1NonIsoPresc
}
