
#--------------------------------------------------------------------#
# L1 MATCH
#--------------------------------------------------------------------#
module hltL1IsoSingleL1MatchFilter = hltEgammaL1MatchFilterRegional from "HLTrigger/Egamma/data/hltEgammaL1MatchFilterRegional.cfi" 

     replace hltL1IsoSingleL1MatchFilter.candIsolatedTag = l1IsoRecoEcalCandidate
     replace hltL1IsoSingleL1MatchFilter.L1SeedFilterTag = l1seedSingle

	
#--------------------------------------------------------------------#
# ET CUT
#--------------------------------------------------------------------#
module hltL1IsoSingleElectronEtFilter = hltEgammaEtFilter from "HLTrigger/Egamma/data/hltEgammaEtFilter.cfi"

 replace hltL1IsoSingleElectronEtFilter.inputTag = hltL1IsoSingleL1MatchFilter
 replace hltL1IsoSingleElectronEtFilter.etcut = 15.0
#      int32  ncandcut = 1


#--------------------------------------------------------------------#
# HCAL ISOL
#--------------------------------------------------------------------#
module hltL1IsoSingleElectronHcalIsolFilter = hltEgammaHcalIsolFilter from "HLTrigger/Egamma/data/hltEgammaHcalIsolFilter.cfi"

 replace hltL1IsoSingleElectronHcalIsolFilter.candTag = hltL1IsoSingleElectronEtFilter
 replace hltL1IsoSingleElectronHcalIsolFilter.isoTag = l1IsolatedElectronHcalIsol
#      double hcalisolbarrelcut = 3.
#      double hcalisolendcapcut = 3.
#      int32 ncandcut = 1

#--------------------------------------------------------------------#
# PIXEL MATCH
#--------------------------------------------------------------------#
module hltL1IsoSingleElectronPixelMatchFilter = hltElectronPixelMatchFilter from "HLTrigger/Egamma/data/hltElectronPixelMatchFilter.cfi"

  replace hltL1IsoSingleElectronPixelMatchFilter.candTag = hltL1IsoSingleElectronHcalIsolFilter
  replace hltL1IsoSingleElectronPixelMatchFilter.L1IsoPixelSeedsTag = l1IsoElectronPixelSeeds
#      double   npixelmatchcut         = 1
#      int32    ncandcut               = 1

## #--------------------------------------------------------------------#
## # E OVER P
## #--------------------------------------------------------------------#
##  module hltL1IsoSingleElectronEoverpFilter = hltElectronEoverpFilter from "HLTrigger/Egamma/data/hltElectronEoverpFilter.cfi"
## 
##  replace hltL1IsoSingleElectronEoverpFilter.candTag = hltL1IsoSingleElectronPixelMatchFilter
##  replace hltL1IsoSingleElectronEoverpFilter.electronIsolatedProducer = pixelMatchElectronsL1IsoForHLT 
## replace hltL1IsoSingleElectronEoverpFilter.doIsolated = true
## 
## #      double eoverpbarrelcut = 1.5
## #      double eoverpendcapcut = 2.45
## #      int32 ncandcut = 1

 #--------------------------------------------------------------------#
 # 1/E - 1/P
 #--------------------------------------------------------------------#
 module hltL1IsoSingleElectronHOneOEMinusOneOPFilter = hltElectronOneOEMinusOneOPFilter from "HLTrigger/Egamma/data/hltElectronOneOEMinusOneOPFilter.cfi"

  replace hltL1IsoSingleElectronHOneOEMinusOneOPFilter.candTag =  hltL1IsoSingleElectronPixelMatchFilter
  replace hltL1IsoSingleElectronHOneOEMinusOneOPFilter.electronIsolatedProducer = pixelMatchElectronsL1IsoForHLT
  replace hltL1IsoSingleElectronHOneOEMinusOneOPFilter.electronNonIsolatedProducer = pixelMatchElectronsL1NonIsoForHLT
  replace hltL1IsoSingleElectronHOneOEMinusOneOPFilter.barrelcut = 999.03
  replace hltL1IsoSingleElectronHOneOEMinusOneOPFilter.endcapcut = 999.03
  replace hltL1IsoSingleElectronHOneOEMinusOneOPFilter.ncandcut = 1
  replace hltL1IsoSingleElectronHOneOEMinusOneOPFilter.doIsolated = true

 

#--------------------------------------------------------------------#
# TRACK ISOL
#--------------------------------------------------------------------#
 module hltL1IsoSingleElectronTrackIsolFilter = hltElectronTrackIsolFilter from "HLTrigger/Egamma/data/hltElectronTrackIsolFilter.cfi"

#replace  hltL1IsoSingleElectronTrackIsolFilter.candTag  = hltL1IsoSingleElectronEoverpFilter
replace  hltL1IsoSingleElectronTrackIsolFilter.candTag  = hltL1IsoSingleElectronHOneOEMinusOneOPFilter
replace  hltL1IsoSingleElectronTrackIsolFilter.isoTag   = l1IsoElectronTrackIsol
#      double pttrackisolcut = 0.06
#      int32 ncandcut         = 1

#--------------------------------------------------------------------#
#--------------------------------------------------------------------#

  module singleElectronL1IsoPresc = HLTPrescaler {
         bool   makeFilterObject = true
         uint32 prescaleFactor = 1
         uint32 eventOffset    = 0
  }



  sequence singleElectronL1Isolated = {
	                     hltBegin& 
                             l1seedSingle &
		              doRegionalEgammaEcal &
                              l1IsolatedEcalClusters &
                              l1IsoRecoEcalCandidate &
                             hltL1IsoSingleL1MatchFilter &
                             hltL1IsoSingleElectronEtFilter &
                              doLocalHcalWithoutHO &
                              l1IsolatedElectronHcalIsol & 
                             hltL1IsoSingleElectronHcalIsolFilter &
                              doLocalPixel & // pixel rechit for SC-pixel matching
	                      pixelMatchElectronL1IsoSequenceForHLT & 
                             hltL1IsoSingleElectronPixelMatchFilter &
			      doLocalStrip & // strip rechit for the electron tracking
                              pixelMatchElectronL1IsoTrackingSequenceForHLT &
                             ////hltL1IsoSingleElectronEoverpFilter &	
	                     hltL1IsoSingleElectronHOneOEMinusOneOPFilter &
                              l1IsoElectronsRegionalRecoTracker & //// here the regional is obtained by
                                                           /// EgammaHLTRegionalPixelSeedGeneratorProducer
                              l1IsoElectronTrackIsol & 
                             hltL1IsoSingleElectronTrackIsolFilter &
                                                      
                             singleElectronL1IsoPresc
                            }

