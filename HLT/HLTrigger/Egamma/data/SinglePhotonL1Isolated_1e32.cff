
#--------------------------------------------------------------------#
# L1 MATCH
#--------------------------------------------------------------------#
module hltL1IsoSinglePhotonL1MatchFilter =  hltEgammaL1MatchFilterRegional from "HLTrigger/Egamma/data/hltEgammaL1MatchFilterRegional.cfi"

     replace hltL1IsoSinglePhotonL1MatchFilter.candIsolatedTag = l1IsoRecoEcalCandidate
replace hltL1IsoSinglePhotonL1MatchFilter.L1SeedFilterTag = l1seedSingle


#--------------------------------------------------------------------#
# ET CUT
#--------------------------------------------------------------------#
module hltL1IsoSinglePhotonEtFilter = hltEgammaEtFilter from "HLTrigger/Egamma/data/hltEgammaEtFilter.cfi"

 replace hltL1IsoSinglePhotonEtFilter.inputTag = hltL1IsoSinglePhotonL1MatchFilter
 replace hltL1IsoSinglePhotonEtFilter.etcut = 30.0
#      int32  ncandcut = 1

#--------------------------------------------------------------------#
# ECAL ISOL
#--------------------------------------------------------------------#
module hltL1IsoSinglePhotonEcalIsolFilter = hltPhotonEcalIsolFilter from "HLTrigger/Egamma/data/hltPhotonEcalIsolFilter.cfi" 

replace hltL1IsoSinglePhotonEcalIsolFilter.candTag = hltL1IsoSinglePhotonEtFilter
replace hltL1IsoSinglePhotonEcalIsolFilter.isoTag  = l1IsolatedPhotonEcalIsol
#double ecalisolcut = 1.5
#int32 ncandcut = 1

#--------------------------------------------------------------------#
# HCAL ISOL
#--------------------------------------------------------------------#
module hltL1IsoSinglePhotonHcalIsolFilter = hltEgammaHcalIsolFilter from "HLTrigger/Egamma/data/hltEgammaHcalIsolFilter.cfi"

 replace hltL1IsoSinglePhotonHcalIsolFilter.candTag = hltL1IsoSinglePhotonEcalIsolFilter
 replace hltL1IsoSinglePhotonHcalIsolFilter.isoTag = l1IsolatedPhotonHcalIsol
 replace hltL1IsoSinglePhotonHcalIsolFilter.hcalisolbarrelcut = 6.
 replace hltL1IsoSinglePhotonHcalIsolFilter.hcalisolendcapcut = 4.
#      int32 ncandcut = 1


#--------------------------------------------------------------------#
# TRACK ISOL
#--------------------------------------------------------------------#
 module hltL1IsoSinglePhotonTrackIsolFilter = hltPhotonTrackIsolFilter from "HLTrigger/Egamma/data/hltPhotonTrackIsolFilter.cfi"

replace  hltL1IsoSinglePhotonTrackIsolFilter.candTag  = hltL1IsoSinglePhotonHcalIsolFilter
replace  hltL1IsoSinglePhotonTrackIsolFilter.isoTag   = l1IsoPhotonTrackIsol
#      double numtrackisolcut = 1
#      int32 ncandcut = 1


#--------------------------------------------------------------------#
#--------------------------------------------------------------------#

  module singlePhotonL1IsoPresc = HLTPrescaler {
         bool   makeFilterObject = true
         uint32 prescaleFactor = 1
         uint32 eventOffset    = 0
  }



  sequence singlePhotonL1Isolated = {
	                   hltBegin&
                           ##doL1T &
                           l1seedSingle & 
		           doRegionalEgammaEcal &
# 		           doLocalEcal &
                           l1IsolatedEcalClusters  &
                           l1IsoRecoEcalCandidate &
                           hltL1IsoSinglePhotonL1MatchFilter &
                           hltL1IsoSinglePhotonEtFilter & 
	                   l1IsolatedPhotonEcalIsol & hltL1IsoSinglePhotonEcalIsolFilter &
                           doLocalHcalWithoutHO &
                           l1IsolatedPhotonHcalIsol & hltL1IsoSinglePhotonHcalIsolFilter &
                           doLocalTracker &
                           l1IsoEgammaRegionalRecoTracker &
                           l1IsoPhotonTrackIsol & hltL1IsoSinglePhotonTrackIsolFilter &
                           singlePhotonL1IsoPresc
	                  }
