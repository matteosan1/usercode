#--------------------------------------------------------------------#
# L1 MATCH
#--------------------------------------------------------------------#
module hltL1NonIsoLargeWindowDoubleElectronL1MatchFilterRegional = hltEgammaL1MatchFilterRegional from "HLTrigger/Egamma/data/hltEgammaL1MatchFilterRegional.cfi" 

     replace hltL1NonIsoLargeWindowDoubleElectronL1MatchFilterRegional.candIsolatedTag = l1IsoRecoEcalCandidate
     replace hltL1NonIsoLargeWindowDoubleElectronL1MatchFilterRegional.candNonIsolatedTag = l1NonIsoRecoEcalCandidate
	
     replace hltL1NonIsoLargeWindowDoubleElectronL1MatchFilterRegional.L1SeedFilterTag = l1seedRelaxedDouble

 #     InputTag l1Tag = l1extraParticles:Isolated
     replace  hltL1NonIsoLargeWindowDoubleElectronL1MatchFilterRegional.ncandcut = 2
     replace  hltL1NonIsoLargeWindowDoubleElectronL1MatchFilterRegional.doIsolated = false
#
#      double region_eta_size      = 0.522
#      double region_eta_size_ecap = 0.87
#      double region_phi_size      = 1.044
#      double barrel_end           = 1.4791
#      double endcap_end           = 2.5

#--------------------------------------------------------------------#
# ET CUT
#--------------------------------------------------------------------#
module hltL1NonIsoLargeWindowDoubleElectronEtFilter = hltEgammaEtFilter from "HLTrigger/Egamma/data/hltEgammaEtFilter.cfi"

 replace hltL1NonIsoLargeWindowDoubleElectronEtFilter.inputTag = hltL1NonIsoLargeWindowDoubleElectronL1MatchFilterRegional
 replace hltL1NonIsoLargeWindowDoubleElectronEtFilter.etcut = 12.0
 replace hltL1NonIsoLargeWindowDoubleElectronEtFilter.ncandcut = 2


#--------------------------------------------------------------------#
# HCAL ISOL
#--------------------------------------------------------------------#
module hltL1NonIsoLargeWindowDoubleElectronHcalIsolFilter = hltEgammaHcalIsolFilter from "HLTrigger/Egamma/data/hltEgammaHcalIsolFilter.cfi"

 replace hltL1NonIsoLargeWindowDoubleElectronHcalIsolFilter.candTag = hltL1NonIsoLargeWindowDoubleElectronEtFilter
 replace hltL1NonIsoLargeWindowDoubleElectronHcalIsolFilter.isoTag = l1IsolatedElectronHcalIsol
 replace hltL1NonIsoLargeWindowDoubleElectronHcalIsolFilter.nonIsoTag  = l1NonIsolatedElectronHcalIsol
 replace hltL1NonIsoLargeWindowDoubleElectronHcalIsolFilter.hcalisolbarrelcut = 9.
 replace hltL1NonIsoLargeWindowDoubleElectronHcalIsolFilter.hcalisolendcapcut = 9.
 replace hltL1NonIsoLargeWindowDoubleElectronHcalIsolFilter.ncandcut = 2
 replace hltL1NonIsoLargeWindowDoubleElectronHcalIsolFilter.doIsolated = false

#--------------------------------------------------------------------#
# PIXEL MATCH
#--------------------------------------------------------------------#
module hltL1NonIsoLargeWindowDoubleElectronPixelMatchFilter = hltElectronPixelMatchFilter from "HLTrigger/Egamma/data/hltElectronPixelMatchFilter.cfi"

  replace hltL1NonIsoLargeWindowDoubleElectronPixelMatchFilter.candTag = hltL1NonIsoLargeWindowDoubleElectronHcalIsolFilter
  replace hltL1NonIsoLargeWindowDoubleElectronPixelMatchFilter.L1IsoPixelSeedsTag = l1IsoLargeWindowElectronPixelSeeds
  replace hltL1NonIsoLargeWindowDoubleElectronPixelMatchFilter.L1NonIsoPixelSeedsTag = l1NonIsoLargeWindowElectronPixelSeeds

replace hltL1NonIsoLargeWindowDoubleElectronPixelMatchFilter.doIsolated = false
#      double   npixelmatchcut         = 1
  replace hltL1NonIsoLargeWindowDoubleElectronPixelMatchFilter.ncandcut = 2

#--------------------------------------------------------------------#
# E OVER P !! HERE is not applyed and it is used to change 
#       the HLTFilterObjectWithRefs from RecoEcalCandidates to Electron
#--------------------------------------------------------------------#
 module hltL1NonIsoLargeWindowDoubleElectronEoverpFilter = hltElectronEoverpFilter from "HLTrigger/Egamma/data/hltElectronEoverpFilter.cfi"

 replace hltL1NonIsoLargeWindowDoubleElectronEoverpFilter.candTag = hltL1NonIsoLargeWindowDoubleElectronPixelMatchFilter
 replace hltL1NonIsoLargeWindowDoubleElectronEoverpFilter.electronIsolatedProducer = pixelMatchElectronsL1IsoLargeWindowForHLT 
 replace hltL1NonIsoLargeWindowDoubleElectronEoverpFilter.electronNonIsolatedProducer = pixelMatchElectronsL1NonIsoLargeWindowForHLT 
  replace hltL1NonIsoLargeWindowDoubleElectronEoverpFilter.eoverpbarrelcut = 15000
  replace hltL1NonIsoLargeWindowDoubleElectronEoverpFilter.eoverpendcapcut = 24500
  replace hltL1NonIsoLargeWindowDoubleElectronEoverpFilter.ncandcut = 2
  replace hltL1NonIsoLargeWindowDoubleElectronEoverpFilter.doIsolated = false

#--------------------------------------------------------------------#
# TRACK ISOL
#--------------------------------------------------------------------#
 module hltL1NonIsoLargeWindowDoubleElectronTrackIsolFilter = hltElectronTrackIsolFilter from "HLTrigger/Egamma/data/hltElectronTrackIsolFilter.cfi"

replace  hltL1NonIsoLargeWindowDoubleElectronTrackIsolFilter.candTag  = hltL1NonIsoLargeWindowDoubleElectronEoverpFilter
replace  hltL1NonIsoLargeWindowDoubleElectronTrackIsolFilter.isoTag   = l1IsoLargeWindowElectronTrackIsol
replace  hltL1NonIsoLargeWindowDoubleElectronTrackIsolFilter.nonIsoTag  = l1NonIsoLargeWindowElectronTrackIsol
replace  hltL1NonIsoLargeWindowDoubleElectronTrackIsolFilter.pttrackisolcut = 0.4
replace  hltL1NonIsoLargeWindowDoubleElectronTrackIsolFilter.ncandcut         = 2
replace  hltL1NonIsoLargeWindowDoubleElectronTrackIsolFilter.doIsolated = false

#--------------------------------------------------------------------#
#--------------------------------------------------------------------#

  module doubleElectronL1NonIsoLargeWindowPresc = HLTPrescaler {
         bool   makeFilterObject = true
         uint32 prescaleFactor = 1
         uint32 eventOffset    = 0
  }



  sequence doubleElectronL1NonIsolatedLargeWindow = { 
 					hltBegin&
                                       # doL1T &
                                        # was like thisl1seedDouble &
                                        l1seedRelaxedDouble &
		           doRegionalEgammaEcal &
#                             doLocalEcal &
                             l1IsolatedEcalClusters 
			   & l1NonIsolatedEcalClusters 
                           & l1IsoRecoEcalCandidate 
                           & l1NonIsoRecoEcalCandidate
                           & hltL1NonIsoLargeWindowDoubleElectronL1MatchFilterRegional
                           & hltL1NonIsoLargeWindowDoubleElectronEtFilter #attention Iso
                           & doLocalHcalWithoutHO
                           & l1IsolatedElectronHcalIsol 
                           & l1NonIsolatedElectronHcalIsol 

                           & hltL1NonIsoLargeWindowDoubleElectronHcalIsolFilter #attention Iso

                  ##### trackerlocalreco &         
	                   &   doLocalPixel   
	                   & pixelMatchElectronL1IsoLargeWindowSequenceForHLT
	                   & pixelMatchElectronL1NonIsoLargeWindowSequenceForHLT

                           & hltL1NonIsoLargeWindowDoubleElectronPixelMatchFilter
                           & doLocalStrip
                           & pixelMatchElectronL1IsoLargeWindowTrackingSequenceForHLT
                           & pixelMatchElectronL1NonIsoLargeWindowTrackingSequenceForHLT
                           & hltL1NonIsoLargeWindowDoubleElectronEoverpFilter
                  ##### ckftracks & 
                           & l1IsoLargeWindowElectronsRegionalRecoTracker
                           & l1NonIsoLargeWindowElectronsRegionalRecoTracker
                  ##### EgammaHLTRegionalPixelSeedGeneratorProducer
                           & l1IsoLargeWindowElectronTrackIsol
                           & l1NonIsoLargeWindowElectronTrackIsol
                           & hltL1NonIsoLargeWindowDoubleElectronTrackIsolFilter
                           & doubleElectronL1NonIsoLargeWindowPresc
                            }






