#--------------------------------------------------------------------#
# L1 MATCH
#--------------------------------------------------------------------#
module hltL1IsoDoubleExclElectronL1MatchFilterRegional = hltEgammaL1MatchFilterRegional from "HLTrigger/Egamma/data/hltEgammaL1MatchFilterRegional.cfi" 


     replace hltL1IsoDoubleExclElectronL1MatchFilterRegional.candIsolatedTag = l1IsoRecoEcalCandidate
     replace hltL1IsoDoubleExclElectronL1MatchFilterRegional.L1SeedFilterTag = l1seedExclusiveDouble
     replace  hltL1IsoDoubleExclElectronL1MatchFilterRegional.ncandcut = 2
     replace  hltL1IsoDoubleExclElectronL1MatchFilterRegional.doIsolated = true

#--------------------------------------------------------------------#
# ET AND PHI CUT
#--------------------------------------------------------------------#
module hltL1IsoDoubleExclElectronEtPhiFilter = hltDoubleExclusiveElectronFilter from "HLTrigger/Egamma/data/hltDoubleExclusiveElectronFilter.cfi"

 replace hltL1IsoDoubleExclElectronEtPhiFilter.candTag = hltL1IsoDoubleExclElectronL1MatchFilterRegional



#--------------------------------------------------------------------#
# HCAL ISOL
#--------------------------------------------------------------------#
module hltL1IsoDoubleExclElectronHcalIsolFilter = hltEgammaHcalIsolFilter from "HLTrigger/Egamma/data/hltEgammaHcalIsolFilter.cfi"

 replace hltL1IsoDoubleExclElectronHcalIsolFilter.candTag = hltL1IsoDoubleExclElectronEtPhiFilter
 replace hltL1IsoDoubleExclElectronHcalIsolFilter.isoTag = l1IsolatedElectronHcalIsol
 replace hltL1IsoDoubleExclElectronHcalIsolFilter.hcalisolbarrelcut = 9.
 replace hltL1IsoDoubleExclElectronHcalIsolFilter.hcalisolendcapcut = 9.
 replace hltL1IsoDoubleExclElectronHcalIsolFilter.ncandcut = 2

#--------------------------------------------------------------------#
# PIXEL MATCH
#--------------------------------------------------------------------#
module hltL1IsoDoubleExclElectronPixelMatchFilter = hltElectronPixelMatchFilter from "HLTrigger/Egamma/data/hltElectronPixelMatchFilter.cfi"

  replace hltL1IsoDoubleExclElectronPixelMatchFilter.candTag = hltL1IsoDoubleExclElectronHcalIsolFilter
  replace hltL1IsoDoubleExclElectronPixelMatchFilter.L1IsoPixelSeedsTag = l1IsoElectronPixelSeeds
  replace hltL1IsoDoubleExclElectronPixelMatchFilter.ncandcut = 2

#--------------------------------------------------------------------#
# E OVER P !! HERE is not applyed and it is used to change 
#       the HLTFilterObjectWithRefs from RecoEcalCandidates to Electron
#--------------------------------------------------------------------#
 module hltL1IsoDoubleExclElectronEoverpFilter = hltElectronEoverpFilter from "HLTrigger/Egamma/data/hltElectronEoverpFilter.cfi"

 replace hltL1IsoDoubleExclElectronEoverpFilter.candTag = hltL1IsoDoubleExclElectronPixelMatchFilter
 replace hltL1IsoDoubleExclElectronEoverpFilter.electronIsolatedProducer = pixelMatchElectronsL1IsoForHLT 
  replace hltL1IsoDoubleExclElectronEoverpFilter.eoverpbarrelcut = 15000
  replace hltL1IsoDoubleExclElectronEoverpFilter.eoverpendcapcut = 24500
  replace hltL1IsoDoubleExclElectronEoverpFilter.ncandcut = 2

#--------------------------------------------------------------------#
# TRACK ISOL
#--------------------------------------------------------------------#
 module hltL1IsoDoubleExclElectronTrackIsolFilter = hltElectronTrackIsolFilter from "HLTrigger/Egamma/data/hltElectronTrackIsolFilter.cfi"

replace  hltL1IsoDoubleExclElectronTrackIsolFilter.candTag  = hltL1IsoDoubleExclElectronEoverpFilter
replace  hltL1IsoDoubleExclElectronTrackIsolFilter.isoTag   = l1IsoElectronTrackIsol
replace  hltL1IsoDoubleExclElectronTrackIsolFilter.pttrackisolcut = 0.4
replace  hltL1IsoDoubleExclElectronTrackIsolFilter.ncandcut         = 2

#--------------------------------------------------------------------#
#--------------------------------------------------------------------#

  module doubleExclElectronL1IsoPresc = HLTPrescaler {
         bool   makeFilterObject = true
         uint32 prescaleFactor = 1
         uint32 eventOffset    = 0
  }



  sequence doubleExclElectronL1Isolated = { 
				hltBegin &
##                                      doL1T &
				l1seedExclusiveDouble &
			     doRegionalEgammaEcal &
	                     l1IsolatedEcalClusters &
                             l1IsoRecoEcalCandidate &
			     hltL1IsoDoubleExclElectronL1MatchFilterRegional &
                             hltL1IsoDoubleExclElectronEtPhiFilter &
			     doLocalHcalWithoutHO &
                             l1IsolatedElectronHcalIsol & 
			     hltL1IsoDoubleExclElectronHcalIsolFilter &
			     doLocalPixel &
	                     pixelMatchElectronL1IsoSequenceForHLT & 
                             hltL1IsoDoubleExclElectronPixelMatchFilter &
			     doLocalStrip  & 
                             pixelMatchElectronL1IsoTrackingSequenceForHLT &
                             hltL1IsoDoubleExclElectronEoverpFilter &	
                             l1IsoElectronsRegionalRecoTracker & //// here the regional is obtained by
                                                           /// EgammaHLTRegionalPixelSeedGeneratorProducer
                             l1IsoElectronTrackIsol & 
			     hltL1IsoDoubleExclElectronTrackIsolFilter &                                                      
                             doubleExclElectronL1IsoPresc
                            }






