
#--------------------------------------------------------------------#
# L1 MATCH
#--------------------------------------------------------------------#
module hltL1NonIsoLargeWindowSingleElectronL1MatchFilterRegional = hltEgammaL1MatchFilterRegional from "HLTrigger/Egamma/data/hltEgammaL1MatchFilterRegional.cfi" 

     replace hltL1NonIsoLargeWindowSingleElectronL1MatchFilterRegional.candIsolatedTag = l1IsoRecoEcalCandidate
     replace hltL1NonIsoLargeWindowSingleElectronL1MatchFilterRegional.candNonIsolatedTag = l1NonIsoRecoEcalCandidate
     replace hltL1NonIsoLargeWindowSingleElectronL1MatchFilterRegional.L1SeedFilterTag = l1seedRelaxedSingle
 #     InputTag l1Tag = l1extraParticles:Isolated
     replace  hltL1NonIsoLargeWindowSingleElectronL1MatchFilterRegional.ncandcut = 1
     replace  hltL1NonIsoLargeWindowSingleElectronL1MatchFilterRegional.doIsolated = false
#
#      double region_eta_size      = 0.522
#      double region_eta_size_ecap = 1.0
#      double region_phi_size      = 1.044
#      double barrel_end           = 1.4791
#      double endcap_end           = 2.65

#--------------------------------------------------------------------#
# ET CUT
#--------------------------------------------------------------------#
module hltL1NonIsoLargeWindowSingleElectronEtFilter = hltEgammaEtFilter from "HLTrigger/Egamma/data/hltEgammaEtFilter.cfi"

 replace hltL1NonIsoLargeWindowSingleElectronEtFilter.inputTag = hltL1NonIsoLargeWindowSingleElectronL1MatchFilterRegional
 replace hltL1NonIsoLargeWindowSingleElectronEtFilter.etcut = 18.0
 replace hltL1NonIsoLargeWindowSingleElectronEtFilter.ncandcut = 1

#--------------------------------------------------------------------#
# HCAL ISOL
#--------------------------------------------------------------------#
module hltL1NonIsoLargeWindowSingleElectronHcalIsolFilter = hltEgammaHcalIsolFilter from "HLTrigger/Egamma/data/hltEgammaHcalIsolFilter.cfi"

 replace hltL1NonIsoLargeWindowSingleElectronHcalIsolFilter.candTag = hltL1NonIsoLargeWindowSingleElectronEtFilter
 replace hltL1NonIsoLargeWindowSingleElectronHcalIsolFilter.isoTag = l1IsolatedElectronHcalIsol
 replace hltL1NonIsoLargeWindowSingleElectronHcalIsolFilter.nonIsoTag  = l1NonIsolatedElectronHcalIsol
 replace hltL1NonIsoLargeWindowSingleElectronHcalIsolFilter.hcalisolbarrelcut = 3.
 replace hltL1NonIsoLargeWindowSingleElectronHcalIsolFilter.hcalisolendcapcut = 3.
 replace hltL1NonIsoLargeWindowSingleElectronHcalIsolFilter.ncandcut = 1
 replace hltL1NonIsoLargeWindowSingleElectronHcalIsolFilter.doIsolated = false

#--------------------------------------------------------------------#
# PIXEL MATCH
#--------------------------------------------------------------------#
module hltL1NonIsoLargeWindowSingleElectronPixelMatchFilter = hltElectronPixelMatchFilter from "HLTrigger/Egamma/data/hltElectronPixelMatchFilter.cfi"

  replace hltL1NonIsoLargeWindowSingleElectronPixelMatchFilter.candTag = hltL1NonIsoLargeWindowSingleElectronHcalIsolFilter
  replace hltL1NonIsoLargeWindowSingleElectronPixelMatchFilter.L1IsoPixelSeedsTag = l1IsoLargeWindowElectronPixelSeeds
  replace hltL1NonIsoLargeWindowSingleElectronPixelMatchFilter.L1NonIsoPixelSeedsTag = l1NonIsoLargeWindowElectronPixelSeeds

replace hltL1NonIsoLargeWindowSingleElectronPixelMatchFilter.doIsolated = false
#      double   npixelmatchcut         = 1
  replace hltL1NonIsoLargeWindowSingleElectronPixelMatchFilter.ncandcut = 1

## #--------------------------------------------------------------------#
## # E OVER P       
## #--------------------------------------------------------------------#
##  module hltL1NonIsoLargeWindowSingleElectronEoverpFilter = hltElectronEoverpFilter from "HLTrigger/Egamma/data/hltElectronEoverpFilter.cfi"
## 
##  replace hltL1NonIsoLargeWindowSingleElectronEoverpFilter.candTag = hltL1NonIsoLargeWindowSingleElectronPixelMatchFilter
##  replace hltL1NonIsoLargeWindowSingleElectronEoverpFilter.electronIsolatedProducer = pixelMatchElectronsL1IsoLargeWindowForHLT 
##  replace hltL1NonIsoLargeWindowSingleElectronEoverpFilter.electronNonIsolatedProducer = pixelMatchElectronsL1NonIsoLargeWindowForHLT 
##   replace hltL1NonIsoLargeWindowSingleElectronEoverpFilter.eoverpbarrelcut = 1.5
##   replace hltL1NonIsoLargeWindowSingleElectronEoverpFilter.eoverpendcapcut = 2.45
##   replace hltL1NonIsoLargeWindowSingleElectronEoverpFilter.ncandcut = 1
##   replace hltL1NonIsoLargeWindowSingleElectronEoverpFilter.doIsolated = false

 #--------------------------------------------------------------------#
 # 1/E - 1/P
 #--------------------------------------------------------------------#
 module hltL1NonIsoLargeWindowSingleElectronHOneOEMinusOneOPFilter = hltElectronOneOEMinusOneOPFilter from "HLTrigger/Egamma/data/hltElectronOneOEMinusOneOPFilter.cfi"

  replace hltL1NonIsoLargeWindowSingleElectronHOneOEMinusOneOPFilter.candTag =  hltL1NonIsoLargeWindowSingleElectronPixelMatchFilter
  replace hltL1NonIsoLargeWindowSingleElectronHOneOEMinusOneOPFilter.electronIsolatedProducer = pixelMatchElectronsL1IsoLargeWindowForHLT
  replace hltL1NonIsoLargeWindowSingleElectronHOneOEMinusOneOPFilter.electronNonIsolatedProducer = pixelMatchElectronsL1NonIsoLargeWindowForHLT
  replace hltL1NonIsoLargeWindowSingleElectronHOneOEMinusOneOPFilter.barrelcut = 999.03
  replace hltL1NonIsoLargeWindowSingleElectronHOneOEMinusOneOPFilter.endcapcut = 999.03
  replace hltL1NonIsoLargeWindowSingleElectronHOneOEMinusOneOPFilter.ncandcut = 1
  replace hltL1NonIsoLargeWindowSingleElectronHOneOEMinusOneOPFilter.doIsolated = false

#--------------------------------------------------------------------#
# TRACK ISOL
#--------------------------------------------------------------------#
 module hltL1NonIsoLargeWindowSingleElectronTrackIsolFilter = hltElectronTrackIsolFilter from "HLTrigger/Egamma/data/hltElectronTrackIsolFilter.cfi"

#replace  hltL1NonIsoLargeWindowSingleElectronTrackIsolFilter.candTag  = hltL1NonIsoLargeWindowSingleElectronEoverpFilter
replace  hltL1NonIsoLargeWindowSingleElectronTrackIsolFilter.candTag  = hltL1NonIsoLargeWindowSingleElectronHOneOEMinusOneOPFilter
replace  hltL1NonIsoLargeWindowSingleElectronTrackIsolFilter.isoTag   = l1IsoLargeWindowElectronTrackIsol
replace  hltL1NonIsoLargeWindowSingleElectronTrackIsolFilter.nonIsoTag  = l1NonIsoLargeWindowElectronTrackIsol
replace  hltL1NonIsoLargeWindowSingleElectronTrackIsolFilter.pttrackisolcut = 0.06
replace  hltL1NonIsoLargeWindowSingleElectronTrackIsolFilter.ncandcut         = 1
replace  hltL1NonIsoLargeWindowSingleElectronTrackIsolFilter.doIsolated = false

#--------------------------------------------------------------------#
#--------------------------------------------------------------------#

  module singleElectronL1NonIsoLargeWindowPresc = HLTPrescaler {
         bool   makeFilterObject = true
         uint32 prescaleFactor = 1
         uint32 eventOffset    = 0
  }


  sequence singleElectronL1NonIsolatedLargeWindow = {
	                           hltBegin& 
                                   l1seedRelaxedSingle &
		                    doRegionalEgammaEcal &
                                    l1IsolatedEcalClusters &
                                    l1NonIsolatedEcalClusters &
                                    l1IsoRecoEcalCandidate &
                                    l1NonIsoRecoEcalCandidate &
                                   hltL1NonIsoLargeWindowSingleElectronL1MatchFilterRegional &
                                   hltL1NonIsoLargeWindowSingleElectronEtFilter &
                                    doLocalHcalWithoutHO &
                                    l1IsolatedElectronHcalIsol & 
                                    l1NonIsolatedElectronHcalIsol & 
                                   hltL1NonIsoLargeWindowSingleElectronHcalIsolFilter &
                                    doLocalPixel & // pixel rechit for SC-pixel matching
	                            pixelMatchElectronL1IsoLargeWindowSequenceForHLT & 
	                            pixelMatchElectronL1NonIsoLargeWindowSequenceForHLT & 
                                   hltL1NonIsoLargeWindowSingleElectronPixelMatchFilter &
			            doLocalStrip & // strip rechit for the electron tracking
                                    pixelMatchElectronL1IsoLargeWindowTrackingSequenceForHLT &
                                    pixelMatchElectronL1NonIsoLargeWindowTrackingSequenceForHLT &
                                   ////hltL1NonIsoLargeWindowSingleElectronEoverpFilter &
				   hltL1NonIsoLargeWindowSingleElectronHOneOEMinusOneOPFilter &	
                                    l1IsoLargeWindowElectronsRegionalRecoTracker & //// here the regional is obtained by
                                    l1NonIsoLargeWindowElectronsRegionalRecoTracker & //// here the regional is obtained by
                                                           /// EgammaHLTRegionalPixelSeedGeneratorProducer
                                    l1IsoLargeWindowElectronTrackIsol & 
                                    l1NonIsoLargeWindowElectronTrackIsol & 
                                   hltL1NonIsoLargeWindowSingleElectronTrackIsolFilter &
                                                      
                             singleElectronL1NonIsoLargeWindowPresc
                            }

