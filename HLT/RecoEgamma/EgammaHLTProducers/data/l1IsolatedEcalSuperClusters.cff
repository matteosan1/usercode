#include "RecoEgamma/EgammaHLTProducers/data/hltIslandBasicClusters.cfi"

#module  l1IsoIslandBasicClusters= hltIslandBasicClusters from "RecoEgamma/EgammaHLTProducers/data/hltIslandBasicClusters.cfi"


#hltHybridSuperClusters.cfi                    

#hltIslandSuperClusters.cfi


# Sequence for clustering in ecal barrel & endcap + preshower

# geometry needed for clustering
include "RecoEcal/EgammaClusterProducers/data/geometryForClustering.cff"

# island clustering sequence

########### BASIC CLUSTERS
#MARCO include "RecoEgamma/EgammaHLTProducers/data/hltIslandBasicClusters.cfi"


###--------- ENDCAP 
module  hltIslandBasicClustersEndcapL1Isolated = hltIslandBasicClusters from "RecoEgamma/EgammaHLTProducers/data/hltIslandBasicClusters.cfi"

replace hltIslandBasicClustersEndcapL1Isolated.l1LowerThr = 5.
replace hltIslandBasicClustersEndcapL1Isolated.doBarrel = false
replace hltIslandBasicClustersEndcapL1Isolated.doEndcaps = true
replace hltIslandBasicClustersEndcapL1Isolated.doIsolated = true
###--------- BARREL 
module hltIslandBasicClustersBarrelL1Isolated = hltIslandBasicClusters from "RecoEgamma/EgammaHLTProducers/data/hltIslandBasicClusters.cfi"
replace hltIslandBasicClustersBarrelL1Isolated.l1LowerThr = 5.
replace hltIslandBasicClustersBarrelL1Isolated.doBarrel = true
replace hltIslandBasicClustersBarrelL1Isolated.doEndcaps = false
replace hltIslandBasicClustersBarrelL1Isolated.doIsolated = true

########### SUPER CLUSTERS

#include "RecoEgamma/EgammaHLTProducers/data/hltIslandSuperClusters.cfi"

module hltIslandSuperClustersL1Isolated = hltIslandSuperClusters from "RecoEgamma/EgammaHLTProducers/data/hltIslandSuperClusters.cfi"
replace hltIslandSuperClustersL1Isolated.endcapClusterProducer = "hltIslandBasicClustersEndcapL1Isolated"
replace hltIslandSuperClustersL1Isolated.barrelClusterProducer = "hltIslandBasicClustersBarrelL1Isolated"
replace hltIslandSuperClustersL1Isolated.doBarrel = true 


# Energy scale correction for Island SuperClusters

#include "RecoEcal/EgammaClusterProducers/data/correctedIslandSuperClusters.cfi"
###--------- ENDCAP 
module correctedIslandEndcapSuperClustersL1Isolated = correctedIslandEndcapSuperClusters from "RecoEcal/EgammaClusterProducers/data/correctedIslandEndcapSuperClusters.cfi"
replace correctedIslandEndcapSuperClustersL1Isolated.rawSuperClusterProducer = "hltIslandSuperClustersL1Isolated"
###--------- BARREL
module correctedIslandBarrelSuperClustersL1Isolated = correctedIslandBarrelSuperClusters from "RecoEcal/EgammaClusterProducers/data/correctedIslandBarrelSuperClusters.cfi"
replace correctedIslandBarrelSuperClustersL1Isolated.rawSuperClusterProducer = "hltIslandSuperClustersL1Isolated"


# create sequence for island clustering
#sequence islandClusteringSequence = {
#             islandBasicClusters,
#             islandSuperClusters,
#             correctedIslandBarrelSuperClusters,
#             correctedIslandEndcapSuperClusters
#}

##### hybrid clustering sequence

#include "RecoEgamma/EgammaHLTProducers/data/hltHybridSuperClusters.cfi"
module hltHybridSuperClustersL1Isolated = hltHybridSuperClusters from "RecoEgamma/EgammaHLTProducers/data/hltHybridSuperClusters.cfi"
replace hltHybridSuperClustersL1Isolated.l1LowerThr = 5.
replace hltHybridSuperClustersL1Isolated.HybridBarrelSeedThr = 1.5

# Energy scale correction for Hybrid SuperClusters
#include "RecoEcal/EgammaClusterProducers/data/correctedHybridSuperClusters.cfi"
module correctedHybridSuperClustersL1Isolated = correctedHybridSuperClusters from "RecoEcal/EgammaClusterProducers/data/correctedHybridSuperClusters.cfi"
replace correctedHybridSuperClustersL1Isolated.rawSuperClusterProducer = "hltHybridSuperClustersL1Isolated"
replace correctedHybridSuperClustersL1Isolated.etThresh = 5.0

# hybrid clustering sequence
#sequence hybridClusteringSequence = {
#           hybridSuperClusters,
#           correctedHybridSuperClusters }

# HERE HERE

# preshower clustering sequence
#include "RecoEcal/EgammaClusterProducers/data/preshowerClusteringSequence.cff"

#include "RecoEcal/EgammaClusterProducers/data/correctedEndcapSuperClustersWithPreshower.cfi"
module correctedEndcapSuperClustersWithPreshowerL1Isolated = correctedEndcapSuperClustersWithPreshower from "RecoEcal/EgammaClusterProducers/data/correctedEndcapSuperClustersWithPreshower.cfi"
replace correctedEndcapSuperClustersWithPreshowerL1Isolated.endcapSClusterProducer = "correctedIslandEndcapSuperClustersL1Isolated"
replace correctedEndcapSuperClustersWithPreshowerL1Isolated.etThresh = 5.0

# create path with all clustering algos
# NB: preshower MUST be run after island clustering in the endcap
#sequence ecalClusters = {islandBasicClusters, 
#                          islandClusteringSequence,
#                          hybridClusteringSequence,
#                          preshowerClusteringSequence
#                        }


##    string barrelHitProducer   = "ecalRegionalEgammaRecHit"
##    string endcapHitProducer   = "ecalRegionalEgammaRecHit"
    replace hltIslandBasicClustersEndcapL1Isolated.endcapHitProducer = "ecalRegionalEgammaRecHit"
    replace hltIslandBasicClustersBarrelL1Isolated.barrelHitProducer = "ecalRegionalEgammaRecHit"
    replace correctedIslandEndcapSuperClustersL1Isolated.recHitProducer = "ecalRegionalEgammaRecHit"
    replace correctedIslandBarrelSuperClustersL1Isolated.recHitProducer = "ecalRegionalEgammaRecHit"
    replace hltHybridSuperClustersL1Isolated.ecalhitproducer = "ecalRegionalEgammaRecHit"
    replace correctedHybridSuperClustersL1Isolated.recHitProducer = "ecalRegionalEgammaRecHit"




sequence l1IsolatedEcalClusters = {
        # hltIslandBasicClusters 
	hltIslandBasicClustersEndcapL1Isolated
       ,hltIslandBasicClustersBarrelL1Isolated
                          ,hltHybridSuperClustersL1Isolated
	                  ,hltIslandSuperClustersL1Isolated
	                  ,correctedIslandEndcapSuperClustersL1Isolated
	                  ,correctedIslandBarrelSuperClustersL1Isolated 
                          ,correctedHybridSuperClustersL1Isolated
                          ,correctedEndcapSuperClustersWithPreshowerL1Isolated
		          #,hltIslandSuperClusters
                          #hybridClusteringSequence,
                          #preshowerClusteringSequence
                        }

