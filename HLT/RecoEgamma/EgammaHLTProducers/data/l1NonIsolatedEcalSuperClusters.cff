#include "RecoEgamma/EgammaHLTProducers/data/hltIslandBasicClusters.cfi"

#module  l1IsoIslandBasicClusters= hltIslandBasicClusters from "RecoEgamma/EgammaHLTProducers/data/hltIslandBasicClusters.cfi"


#hltHybridSuperClusters.cfi                    

#hltIslandSuperClusters.cfi


# Sequence for clustering in ecal barrel & endcap + preshower

# geometry needed for clustering
include "RecoEcal/EgammaClusterProducers/data/geometryForClustering.cff"

# island clustering sequence

########### BASIC CLUSTERS
# include "RecoEgamma/EgammaHLTProducers/data/hltIslandBasicClusters.cfi"


###--------- ENDCAP 
module  hltIslandBasicClustersEndcapL1NonIsolated = hltIslandBasicClusters from "RecoEgamma/EgammaHLTProducers/data/hltIslandBasicClusters.cfi"

replace hltIslandBasicClustersEndcapL1NonIsolated.l1LowerThr = 5.
replace hltIslandBasicClustersEndcapL1NonIsolated.doBarrel = false
replace hltIslandBasicClustersEndcapL1NonIsolated.doEndcaps = true
replace hltIslandBasicClustersEndcapL1NonIsolated.doIsolated = false
###--------- BARREL 
module hltIslandBasicClustersBarrelL1NonIsolated = hltIslandBasicClusters from "RecoEgamma/EgammaHLTProducers/data/hltIslandBasicClusters.cfi"
replace hltIslandBasicClustersBarrelL1NonIsolated.l1LowerThr = 5.
replace hltIslandBasicClustersBarrelL1NonIsolated.doBarrel = true
replace hltIslandBasicClustersBarrelL1NonIsolated.doEndcaps = false
replace hltIslandBasicClustersBarrelL1NonIsolated.doIsolated = false

########### SUPER CLUSTERS

#include "RecoEgamma/EgammaHLTProducers/data/hltIslandSuperClusters.cfi"
module hltIslandSuperClustersL1NonIsolated = hltIslandSuperClusters from "RecoEgamma/EgammaHLTProducers/data/hltIslandSuperClusters.cfi"
replace hltIslandSuperClustersL1NonIsolated.endcapClusterProducer = "hltIslandBasicClustersEndcapL1NonIsolated"
replace hltIslandSuperClustersL1NonIsolated.barrelClusterProducer = "hltIslandBasicClustersBarrelL1NonIsolated"
replace hltIslandSuperClustersL1NonIsolated.doBarrel = true

# Energy scale correction for Island SuperClusters

#include "RecoEcal/EgammaClusterProducers/data/correctedIslandSuperClusters.cfi"
###--------- ENDCAP 

module correctedIslandEndcapSuperClustersL1NonIsolated = correctedIslandEndcapSuperClusters from "RecoEcal/EgammaClusterProducers/data/correctedIslandEndcapSuperClusters.cfi"

replace correctedIslandEndcapSuperClustersL1NonIsolated.rawSuperClusterProducer = "hltIslandSuperClustersL1NonIsolated"

###--------- BARREL

module correctedIslandBarrelSuperClustersL1NonIsolated = correctedIslandBarrelSuperClusters from "RecoEcal/EgammaClusterProducers/data/correctedIslandBarrelSuperClusters.cfi"

replace correctedIslandBarrelSuperClustersL1NonIsolated.rawSuperClusterProducer = "hltIslandSuperClustersL1NonIsolated"


# create sequence for island clustering
#sequence islandClusteringSequence = {
#             islandBasicClusters,
#             islandSuperClusters,
#             correctedIslandBarrelSuperClusters,
#             correctedIslandEndcapSuperClusters
#}

##### hybrid clustering sequence

#include "RecoEgamma/EgammaHLTProducers/data/hltHybridSuperClusters.cfi"
module hltHybridSuperClustersL1NonIsolated = hltHybridSuperClusters from "RecoEgamma/EgammaHLTProducers/data/hltHybridSuperClusters.cfi"
replace hltHybridSuperClustersL1NonIsolated.l1LowerThr = 5.
replace hltHybridSuperClustersL1NonIsolated.HybridBarrelSeedThr = 1.5
replace hltHybridSuperClustersL1NonIsolated.doIsolated = false

# Energy scale correction for Hybrid SuperClusters
#include "RecoEcal/EgammaClusterProducers/data/correctedHybridSuperClusters.cfi"
module correctedHybridSuperClustersL1NonIsolated = correctedHybridSuperClusters from "RecoEcal/EgammaClusterProducers/data/correctedHybridSuperClusters.cfi"
replace correctedHybridSuperClustersL1NonIsolated.rawSuperClusterProducer = "hltHybridSuperClustersL1NonIsolated"
replace correctedHybridSuperClustersL1NonIsolated.etThresh = 5.0

# hybrid clustering sequence
#sequence hybridClusteringSequence = {
#           hybridSuperClusters,
#           correctedHybridSuperClusters }

# HERE HERE

# preshower clustering sequence
#include "RecoEcal/EgammaClusterProducers/data/preshowerClusteringSequence.cff"

#include "RecoEcal/EgammaClusterProducers/data/correctedEndcapSuperClustersWithPreshower.cfi"
module correctedEndcapSuperClustersWithPreshowerL1NonIsolated = correctedEndcapSuperClustersWithPreshower from "RecoEcal/EgammaClusterProducers/data/correctedEndcapSuperClustersWithPreshower.cfi"
replace correctedEndcapSuperClustersWithPreshowerL1NonIsolated.endcapSClusterProducer = "correctedIslandEndcapSuperClustersL1NonIsolated"
replace correctedEndcapSuperClustersWithPreshowerL1NonIsolated.etThresh = 5.0


# create path with all clustering algos
# NB: preshower MUST be run after island clustering in the endcap
#sequence ecalClusters = {islandBasicClusters, 
#                          islandClusteringSequence,
#                          hybridClusteringSequence,
#                          preshowerClusteringSequence
#                        }




##    string barrelHitProducer   = "ecalRegionalEgammaRecHit"
##    string endcapHitProducer   = "ecalRegionalEgammaRecHit"
    replace hltIslandBasicClustersEndcapL1NonIsolated.endcapHitProducer = "ecalRegionalEgammaRecHit"
    replace hltIslandBasicClustersBarrelL1NonIsolated.barrelHitProducer = "ecalRegionalEgammaRecHit"
    replace correctedIslandEndcapSuperClustersL1NonIsolated.recHitProducer = "ecalRegionalEgammaRecHit"
    replace correctedIslandBarrelSuperClustersL1NonIsolated.recHitProducer = "ecalRegionalEgammaRecHit"
    replace hltHybridSuperClustersL1NonIsolated.ecalhitproducer = "ecalRegionalEgammaRecHit"
    replace correctedHybridSuperClustersL1NonIsolated.recHitProducer = "ecalRegionalEgammaRecHit"




sequence l1NonIsolatedEcalClusters = {
        # hltIslandBasicClusters 
	hltIslandBasicClustersEndcapL1NonIsolated
       ,hltIslandBasicClustersBarrelL1NonIsolated
                          ,hltHybridSuperClustersL1NonIsolated
	                  ,hltIslandSuperClustersL1NonIsolated
	                  ,correctedIslandEndcapSuperClustersL1NonIsolated
	                  ,correctedIslandBarrelSuperClustersL1NonIsolated
                          ,correctedHybridSuperClustersL1NonIsolated
                          ,correctedEndcapSuperClustersWithPreshowerL1NonIsolated
		          #,hltIslandSuperClusters
                          #hybridClusteringSequence,
                          #preshowerClusteringSequence
                        }

