# $Id: pixelMatchGsfElectronSequence.cff,v 1.11 2007/10/23 11:24:54 uberthon Exp $
# create a sequence with all required modules and sources needed to make
# Gsf electron sequence
#

# tracking stuff
include "RecoTracker/TkNavigation/data/NavigationSchoolESProducer.cff"
include "RecoTracker/CkfPattern/data/CkfTrajectoryBuilderESProducer.cff"
include "RecoTracker/TrackProducer/data/CTFFinalFitWithMaterial.cff"

# modules to make seeds, tracks and electrons
include "RecoEgamma/EgammaElectronProducers/data/egammaChi2MeasurementEstimatorESProducer.cfi"
include "RecoEgamma/EgammaElectronProducers/data/electronPixelSeeds.cfi"

module electronPixelSeedsForGlobalGsfElectrons = electronPixelSeeds from "RecoEgamma/EgammaElectronProducers/data/electronPixelSeeds.cfi"
replace electronPixelSeedsForGlobalGsfElectrons.SeedAlgo = "FilteredSeed"
replace electronPixelSeedsForGlobalGsfElectrons.SeedConfiguration = {
    string initialSeedProducer ="globalMixedSeeds"
    string initialSeedLabel =""
} 

include "RecoEgamma/EgammaElectronProducers/data/globalGsfElectrons.cff"

# CKFTrackCandidateMaker
include "RecoTracker/CkfPattern/data/CkfTrackCandidates.cff"
module egammaCkfTrackCandidatesForGlobalGsfElectrons = ckfTrackCandidates from "RecoTracker/CkfPattern/data/CkfTrackCandidates.cfi"
replace egammaCkfTrackCandidatesForGlobalGsfElectrons.TrajectoryBuilder = "TrajectoryBuilderForPixelMatchGsfElectrons"
replace egammaCkfTrackCandidatesForGlobalGsfElectrons.SeedProducer ="electronPixelSeedsForGlobalGsfElectrons"

# sources needed for GSF fit
include "TrackingTools/GsfTracking/data/GsfElectronFit.cff"

# Gsf track fit, version not using Seed Association
module pixelMatchGsfFitForGlobalGsfElectrons = GsfElectrons from "TrackingTools/GsfTracking/data/GsfElectronFit.cfi"
replace pixelMatchGsfFitForGlobalGsfElectrons.src = "egammaCkfTrackCandidatesForGlobalGsfElectrons"
replace pixelMatchGsfFitForGlobalGsfElectrons.Propagator  = "fwdGsfElectronPropagator"

sequence globalGsfElectronSequence = {
        electronPixelSeedsForGlobalGsfElectrons,
        egammaCkfTrackCandidatesForGlobalGsfElectrons,
        pixelMatchGsfFitForGlobalGsfElectrons,
        globalGsfElectrons
    }
    
